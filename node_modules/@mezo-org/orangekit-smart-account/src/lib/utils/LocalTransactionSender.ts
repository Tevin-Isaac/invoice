import { JsonRpcProvider, Signer, TransactionRequest, Wallet } from "ethers"
import {
  TransactionSender,
  TransactionSenderResponse,
} from "./TransactionSender"

export default class LocalTransactionSender implements TransactionSender {
  readonly #provider: JsonRpcProvider

  readonly #signer: Signer

  constructor(relayerPrivateKey: string) {
    this.#provider = new JsonRpcProvider("http://localhost:8545")
    this.#signer = new Wallet(relayerPrivateKey, this.#provider)
  }

  async sendTransaction(
    tx: TransactionRequest,
  ): Promise<TransactionSenderResponse> {
    return this.#signer.sendTransaction(tx)
  }
}
