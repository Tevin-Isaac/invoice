// SPDX-License-Identifier: GPL-3.0-only
pragma solidity 0.8.25;

/// @title ERC-1271 Signature Validation Standard Interface
/// @dev Interface of the ERC-1271 standard for signature validation by contracts.
///      This standard allows contracts to implement a function to validate signatures
///      in a generic way, facilitating interactions with external contracts that
///      expect a contract to sign messages or transactions.
///      The standard is defined in EIP-1271, which can be found at https://eips.ethereum.org/EIPS/eip-1271.
interface IERC1271 {
    /// @notice Validates a signature for a given data hash.
    /// @dev This method returns a magic value if the signature is valid for the
    ///      provided data hash and signature.
    ///      Contracts implementing this interface can use this function to provide
    ///      custom signature validation logic.
    /// @param hash The hash of the data that was signed.
    /// @param signature The signature bytes that need to be validated against the
    ///        data hash.
    /// @return magicValue A constant magic value (`0x1626ba7e`) if the signature
    ///         is valid, indicating compliance with the ERC-1271 standard.
    function isValidSignature(
        bytes32 hash,
        bytes memory signature
    ) external view returns (bytes4 magicValue);
}

/// @title ERC-1271 Signature Validation Standard Abstract Contract
/// @dev Provides a basic implementation of the ERC-1271 standard, including the
///      magic value constant.
///      This abstract contract can be extended to create custom implementations
///      of the ERC-1271 standard, defining the specific logic required to validate
///      signatures in the context of the extending contract.
abstract contract ERC1271 is IERC1271 {
    /// @notice The magic value to be returned by `isValidSignature` when the
    ///         signature is valid.
    /// @dev This constant represents `bytes4(keccak256("isValidSignature(bytes32,bytes)")`.
    ///      It is used to indicate that a signature is valid according to the
    ///      ERC-1271 standard.
    bytes4 internal constant ERC1271_MAGIC_VALUE = 0x1626ba7e;
}
