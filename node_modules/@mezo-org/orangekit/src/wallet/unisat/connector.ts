/* eslint-disable import/prefer-default-export */
import icon from "./icon"
import { ConnectorConfig, createOrangeKitConnector } from "../connector"
import { OrangeKitWalletId } from "../types"
import { getWalletInjectedProvider } from "../utils"
import { OrangeKitBitcoinProvider } from "../bitcoin-wallet-provider"

export function getOrangeKitUnisatConnector({
  rpcUrl,
  chainId,
  relayApiKey,
}: ConnectorConfig) {
  const injectedProvider = getWalletInjectedProvider(OrangeKitWalletId.UNISAT)
  const bitcoinWalletProvider = new OrangeKitBitcoinProvider(injectedProvider!)

  return () =>
    createOrangeKitConnector(
      OrangeKitWalletId.UNISAT,
      "Unisat",
      icon,
      rpcUrl,
      chainId,
      bitcoinWalletProvider,
      relayApiKey,
    )
}
