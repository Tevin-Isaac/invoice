/* eslint-disable import/prefer-default-export */
import icon from "./icon"
import { ConnectorConfig, createOrangeKitConnector } from "../connector"
import { OrangeKitWalletId } from "../types"
import { getWalletInjectedProvider } from "../utils"
import { OrangeKitBitcoinProvider } from "../bitcoin-wallet-provider"

export function getOrangeKitOKXConnector({
  rpcUrl,
  chainId,
  relayApiKey,
}: ConnectorConfig) {
  const injectedProvider = getWalletInjectedProvider(OrangeKitWalletId.OKX)
  const bitcoinWalletProvider = new OrangeKitBitcoinProvider(injectedProvider!)

  return () =>
    createOrangeKitConnector(
      OrangeKitWalletId.OKX,
      "OKX",
      icon,
      rpcUrl,
      chainId,
      bitcoinWalletProvider,
      relayApiKey,
    )
}
